/*!
 * white-board-pro2.js v1.0.9
 * (c) 2019-2020 sfl
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@babel/runtime/helpers/typeof")):"function"==typeof define&&define.amd?define(["exports","@babel/runtime/helpers/typeof"],e):e((t=t||self)["white-board-pro2"]={},t._typeof)}(this,(function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var i=function(t){return t&&t.Math==Math&&t},o=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n&&n)||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},c=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,l={f:u&&!s.call({1:2},1)?function(t){var e=u(this,t);return!!e&&e.enumerable}:s},h=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,d=function(t){return f.call(t).slice(8,-1)},p="".split,g=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==d(t)?p.call(t,""):Object(t)}:Object,b=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return g(b(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},m=function(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},x={}.hasOwnProperty,w=function(t,e){return x.call(t,e)},A=o.document,E=y(A)&&y(A.createElement),S=function(t){return E?A.createElement(t):{}},C=!c&&!a((function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a})),I=Object.getOwnPropertyDescriptor,O={f:c?I:function(t,e){if(t=v(t),e=m(e,!0),C)try{return I(t,e)}catch(t){}if(w(t,e))return h(!l.f.call(t,e),t[e])}},k=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},P=Object.defineProperty,B={f:c?P:function(t,e,n){if(k(t),e=m(e,!0),k(n),C)try{return P(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},R=c?function(t,e,n){return B.f(t,e,h(1,n))}:function(t,e,n){return t[e]=n,t},N=function(t,e){try{R(o,t,e)}catch(n){o[t]=e}return e},M=o["__core-js_shared__"]||N("__core-js_shared__",{}),j=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(t){return j.call(t)});var T,F,L,W=M.inspectSource,D=o.WeakMap,H="function"==typeof D&&/native code/.test(W(D)),z=r((function(t){(t.exports=function(t,e){return M[t]||(M[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),q=0,V=Math.random(),X=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++q+V).toString(36)},K=z("keys"),U=function(t){return K[t]||(K[t]=X(t))},G={},Y=o.WeakMap;if(H){var _=new Y,Z=_.get,J=_.has,Q=_.set;T=function(t,e){return Q.call(_,t,e),e},F=function(t){return Z.call(_,t)||{}},L=function(t){return J.call(_,t)}}else{var $=U("state");G[$]=!0,T=function(t,e){return R(t,$,e),e},F=function(t){return w(t,$)?t[$]:{}},L=function(t){return w(t,$)}}var tt,et,nt={set:T,get:F,has:L,enforce:function(t){return L(t)?F(t):T(t,{})},getterFor:function(t){return function(e){var n;if(!y(e)||(n=F(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},rt=r((function(t){var e=nt.get,n=nt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,a){var c=!!a&&!!a.unsafe,s=!!a&&!!a.enumerable,u=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||w(i,"name")||R(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==o?(c?!u&&t[e]&&(s=!0):delete t[e],s?t[e]=i:R(t,e,i)):s?t[e]=i:N(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||W(this)}))})),it=o,ot=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?ot(it[t])||ot(o[t]):it[t]&&it[t][e]||o[t]&&o[t][e]},ct=Math.ceil,st=Math.floor,ut=function(t){return isNaN(t=+t)?0:(t>0?st:ct)(t)},lt=Math.min,ht=function(t){return t>0?lt(ut(t),9007199254740991):0},ft=Math.max,dt=Math.min,pt=function(t,e){var n=ut(t);return n<0?ft(n+e,0):dt(n,e)},gt=function(t){return function(e,n,r){var i,o=v(e),a=ht(o.length),c=pt(r,a);if(t&&n!=n){for(;a>c;)if((i=o[c++])!=i)return!0}else for(;a>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}},bt={includes:gt(!0),indexOf:gt(!1)}.indexOf,vt=function(t,e){var n,r=v(t),i=0,o=[];for(n in r)!w(G,n)&&w(r,n)&&o.push(n);for(;e.length>i;)w(r,n=e[i++])&&(~bt(o,n)||o.push(n));return o},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mt=yt.concat("length","prototype"),xt={f:Object.getOwnPropertyNames||function(t){return vt(t,mt)}},wt={f:Object.getOwnPropertySymbols},At=at("Reflect","ownKeys")||function(t){var e=xt.f(k(t)),n=wt.f;return n?e.concat(n(t)):e},Et=function(t,e){for(var n=At(e),r=B.f,i=O.f,o=0;o<n.length;o++){var a=n[o];w(t,a)||r(t,a,i(e,a))}},St=/#|\.prototype\./,Ct=function(t,e){var n=Ot[It(t)];return n==Pt||n!=kt&&("function"==typeof e?a(e):!!e)},It=Ct.normalize=function(t){return String(t).replace(St,".").toLowerCase()},Ot=Ct.data={},kt=Ct.NATIVE="N",Pt=Ct.POLYFILL="P",Bt=Ct,Rt=O.f,Nt=function(t,e){var n,r,i,a,c,s=t.target,u=t.global,l=t.stat;if(n=u?o:l?o[s]||N(s,{}):(o[s]||{}).prototype)for(r in e){if(a=e[r],i=t.noTargetGet?(c=Rt(n,r))&&c.value:n[r],!Bt(u?r:s+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;Et(a,i)}(t.sham||i&&i.sham)&&R(a,"sham",!0),rt(n,r,a,t)}},Mt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},jt=function(t){return Object(b(t))},Tt=Array.isArray||function(t){return"Array"==d(t)},Ft=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),Lt=Ft&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Wt=z("wks"),Dt=o.Symbol,Ht=Lt?Dt:Dt&&Dt.withoutSetter||X,zt=function(t){return w(Wt,t)||(Ft&&w(Dt,t)?Wt[t]=Dt[t]:Wt[t]=Ht("Symbol."+t)),Wt[t]},qt=zt("species"),Vt=function(t,e){var n;return Tt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Tt(n.prototype)?y(n)&&null===(n=n[qt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Xt=[].push,Kt=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(c,s,u,l){for(var h,f,d=jt(c),p=g(d),b=function(t,e,n){if(Mt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}(s,u,3),v=ht(p.length),y=0,m=l||Vt,x=e?m(c,v):n?m(c,0):void 0;v>y;y++)if((a||y in p)&&(f=b(h=p[y],y,d),t))if(e)x[y]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:Xt.call(x,h)}else if(i)return!1;return o?-1:r||i?i:x}},Ut={forEach:Kt(0),map:Kt(1),filter:Kt(2),some:Kt(3),every:Kt(4),find:Kt(5),findIndex:Kt(6)},Gt=at("navigator","userAgent")||"",Yt=o.process,_t=Yt&&Yt.versions,Zt=_t&&_t.v8;Zt?et=(tt=Zt.split("."))[0]+tt[1]:Gt&&(!(tt=Gt.match(/Edge\/(\d+)/))||tt[1]>=74)&&(tt=Gt.match(/Chrome\/(\d+)/))&&(et=tt[1]);var Jt=et&&+et,Qt=zt("species"),$t=function(t){return Jt>=51||!a((function(){var e=[];return(e.constructor={})[Qt]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},te=Object.defineProperty,ee={},ne=function(t){throw t},re=function(t,e){if(w(ee,t))return ee[t];e||(e={});var n=[][t],r=!!w(e,"ACCESSORS")&&e.ACCESSORS,i=w(e,0)?e[0]:ne,o=w(e,1)?e[1]:void 0;return ee[t]=!!n&&!a((function(){if(r&&!c)return!0;var t={length:-1};r?te(t,1,{enumerable:!0,get:ne}):t[1]=1,n.call(t,i,o)}))},ie=Ut.map,oe=$t("map"),ae=re("map");Nt({target:"Array",proto:!0,forced:!oe||!ae},{map:function(t){return ie(this,t,arguments.length>1?arguments[1]:void 0)}});var ce,se,ue=function(t){return function(e,n,r,i){Mt(n);var o=jt(e),a=g(o),c=ht(o.length),s=t?c-1:0,u=t?-1:1;if(r<2)for(;;){if(s in a){i=a[s],s+=u;break}if(s+=u,t?s<0:c<=s)throw TypeError("Reduce of empty array with no initial value")}for(;t?s>=0:c>s;s+=u)s in a&&(i=n(i,a[s],s,o));return i}},le={left:ue(!1),right:ue(!0)}.left,he=!!(se=[]["reduce"])&&a((function(){se.call(null,ce||function(){throw 1},1)})),fe=re("reduce",{1:0});Nt({target:"Array",proto:!0,forced:!he||!fe},{reduce:function(t){return le(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var de=function(t,e,n){var r=m(e);r in t?B.f(t,r,h(0,n)):t[r]=n},pe=$t("slice"),ge=re("slice",{ACCESSORS:!0,0:0,1:2}),be=zt("species"),ve=[].slice,ye=Math.max;Nt({target:"Array",proto:!0,forced:!pe||!ge},{slice:function(t,e){var n,r,i,o=v(this),a=ht(o.length),c=pt(t,a),s=pt(void 0===e?a:e,a);if(Tt(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Tt(n.prototype)?y(n)&&null===(n=n[be])&&(n=void 0):n=void 0,n===Array||void 0===n))return ve.call(o,c,s);for(r=new(void 0===n?Array:n)(ye(s-c,0)),i=0;c<s;c++,i++)c in o&&de(r,i,o[c]);return r.length=i,r}});var me=$t("splice"),xe=re("splice",{ACCESSORS:!0,0:0,1:2}),we=Math.max,Ae=Math.min;Nt({target:"Array",proto:!0,forced:!me||!xe},{splice:function(t,e){var n,r,i,o,a,c,s=jt(this),u=ht(s.length),l=pt(t,u),h=arguments.length;if(0===h?n=r=0:1===h?(n=0,r=u-l):(n=h-2,r=Ae(we(ut(e),0),u-l)),u+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=Vt(s,r),o=0;o<r;o++)(a=l+o)in s&&de(i,o,s[a]);if(i.length=r,n<r){for(o=l;o<u-r;o++)c=o+n,(a=o+r)in s?s[c]=s[a]:delete s[c];for(o=u;o>u-r+n;o--)delete s[o-1]}else if(n>r)for(o=u-r;o>l;o--)c=o+n-1,(a=o+r-1)in s?s[c]=s[a]:delete s[c];for(o=0;o<n;o++)s[o+l]=arguments[o+2];return s.length=u-r+n,i}});var Ee,Se=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return k(n),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ce=function(t,e,n){var r,i;return Se&&"function"==typeof(r=e.constructor)&&r!==n&&y(i=r.prototype)&&i!==n.prototype&&Se(t,i),t},Ie=Object.keys||function(t){return vt(t,yt)},Oe=c?Object.defineProperties:function(t,e){k(t);for(var n,r=Ie(e),i=r.length,o=0;i>o;)B.f(t,n=r[o++],e[n]);return t},ke=at("document","documentElement"),Pe=U("IE_PROTO"),Be=function(){},Re=function(t){return"<script>"+t+"<\/script>"},Ne=function(){try{Ee=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Ne=Ee?function(t){t.write(Re("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ee):((e=S("iframe")).style.display="none",ke.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Re("document.F=Object")),t.close(),t.F);for(var n=yt.length;n--;)delete Ne.prototype[yt[n]];return Ne()};G[Pe]=!0;var Me=Object.create||function(t,e){var n;return null!==t?(Be.prototype=k(t),n=new Be,Be.prototype=null,n[Pe]=t):n=Ne(),void 0===e?n:Oe(n,e)},je="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Te=RegExp("^"+je+je+"*"),Fe=RegExp(je+je+"*$"),Le=function(t){return function(e){var n=String(b(e));return 1&t&&(n=n.replace(Te,"")),2&t&&(n=n.replace(Fe,"")),n}},We={start:Le(1),end:Le(2),trim:Le(3)},De=xt.f,He=O.f,ze=B.f,qe=We.trim,Ve=o.Number,Xe=Ve.prototype,Ke="Number"==d(Me(Xe)),Ue=function(t){var e,n,r,i,o,a,c,s,u=m(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=qe(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=u.slice(2)).length,c=0;c<a;c++)if((s=o.charCodeAt(c))<48||s>i)return NaN;return parseInt(o,r)}return+u};if(Bt("Number",!Ve(" 0o1")||!Ve("0b1")||Ve("+0x1"))){for(var Ge,Ye=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Ye&&(Ke?a((function(){Xe.valueOf.call(n)})):"Number"!=d(n))?Ce(new Ve(Ue(e)),n,Ye):Ue(e)},_e=c?De(Ve):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Ze=0;_e.length>Ze;Ze++)w(Ve,Ge=_e[Ze])&&!w(Ye,Ge)&&ze(Ye,Ge,He(Ve,Ge));Ye.prototype=Xe,Xe.constructor=Ye,rt(o,"Number",Ye)}var Je="".repeat||function(t){var e=String(b(this)),n="",r=ut(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},Qe=1..toFixed,$e=Math.floor,tn=function(t,e,n){return 0===e?n:e%2==1?tn(t,e-1,n*t):tn(t*t,e/2,n)};Nt({target:"Number",proto:!0,forced:Qe&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){Qe.call({})}))},{toFixed:function(t){var e,n,r,i,o=function(t){if("number"!=typeof t&&"Number"!=d(t))throw TypeError("Incorrect invocation");return+t}(this),a=ut(t),c=[0,0,0,0,0,0],s="",u="0",l=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=$e(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=$e(n/t),n=n%t*1e7},f=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+Je.call("0",7-n.length)+n}return e};if(a<0||a>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(s="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*tn(2,69,1))-69)<0?o*tn(2,-e,1):o/tn(2,e,1),n*=4503599627370496,(e=52-e)>0){for(l(0,n),r=a;r>=7;)l(1e7,0),r-=7;for(l(tn(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),l(1,1),h(2),u=f()}else l(0,n),l(1<<-e,0),u=f()+Je.call("0",a);return u=a>0?s+((i=u.length)<=a?"0."+Je.call("0",a-i)+u:u.slice(0,i-a)+"."+u.slice(i-a)):s+u}});var en=Object.assign,nn=Object.defineProperty,rn=!en||a((function(){if(c&&1!==en({b:1},en(nn({},"a",{enumerable:!0,get:function(){nn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=en({},t)[n]||"abcdefghijklmnopqrst"!=Ie(en({},e)).join("")}))?function(t,e){for(var n=jt(t),r=arguments.length,i=1,o=wt.f,a=l.f;r>i;)for(var s,u=g(arguments[i++]),h=o?Ie(u).concat(o(u)):Ie(u),f=h.length,d=0;f>d;)s=h[d++],c&&!a.call(u,s)||(n[s]=u[s]);return n}:en;Nt({target:"Object",stat:!0,forced:Object.assign!==rn},{assign:rn});var on=function(){var t=k(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function an(t,e){return RegExp(t,e)}var cn,sn,un={UNSUPPORTED_Y:a((function(){var t=an("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:a((function(){var t=an("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ln=RegExp.prototype.exec,hn=String.prototype.replace,fn=ln,dn=(cn=/a/,sn=/b*/g,ln.call(cn,"a"),ln.call(sn,"a"),0!==cn.lastIndex||0!==sn.lastIndex),pn=un.UNSUPPORTED_Y||un.BROKEN_CARET,gn=void 0!==/()??/.exec("")[1];(dn||gn||pn)&&(fn=function(t){var e,n,r,i,o=this,a=pn&&o.sticky,c=on.call(o),s=o.source,u=0,l=t;return a&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),l=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(s="(?: "+s+")",l=" "+l,u++),n=new RegExp("^(?:"+s+")",c)),gn&&(n=new RegExp("^"+s+"$(?!\\s)",c)),dn&&(e=o.lastIndex),r=ln.call(a?n:o,l),a?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:dn&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),gn&&r&&r.length>1&&hn.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var bn=fn;Nt({target:"RegExp",proto:!0,forced:/./.exec!==bn},{exec:bn});var vn=zt("species"),yn=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),mn="$0"==="a".replace(/./,"$0"),xn=zt("replace"),wn=!!/./[xn]&&""===/./[xn]("a","$0"),An=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),En=zt("match"),Sn=zt("species"),Cn=function(t){return function(e,n){var r,i,o=String(b(e)),a=ut(n),c=o.length;return a<0||a>=c?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===c||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},In={codeAt:Cn(!1),charAt:Cn(!0)}.charAt,On=function(t,e,n){return e+(n?In(t,e).length:1)},kn=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==d(t))throw TypeError("RegExp#exec called on incompatible receiver");return bn.call(t,e)},Pn=[].push,Bn=Math.min,Rn=!a((function(){return!RegExp(4294967295,"y")}));function Nn(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}!function(t,e,n,r){var i=zt(t),o=!a((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),c=o&&!a((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[vn]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!c||"replace"===t&&(!yn||!mn||wn)||"split"===t&&!An){var s=/./[i],u=n(i,""[t],(function(t,e,n,r,i){return e.exec===bn?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:mn,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:wn}),l=u[0],h=u[1];rt(String.prototype,t,l),rt(RegExp.prototype,i,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)})}r&&R(RegExp.prototype[i],"sham",!0)}("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r,i,o=String(b(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[o];if(!y(r=t)||(void 0!==(i=r[En])?!i:"RegExp"!=d(r)))return e.call(o,t,a);for(var c,s,u,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,p=new RegExp(t.source,h+"g");(c=bn.call(p,o))&&!((s=p.lastIndex)>f&&(l.push(o.slice(f,c.index)),c.length>1&&c.index<o.length&&Pn.apply(l,c.slice(1)),u=c[0].length,f=s,l.length>=a));)p.lastIndex===c.index&&p.lastIndex++;return f===o.length?!u&&p.test("")||l.push(""):l.push(o.slice(f)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=b(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=k(t),c=String(this),s=function(t,e){var n,r=k(t).constructor;return void 0===r||null==(n=k(r)[Sn])?e:Mt(n)}(a,RegExp),u=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Rn?"y":"g"),h=new s(Rn?a:"^(?:"+a.source+")",l),f=void 0===i?4294967295:i>>>0;if(0===f)return[];if(0===c.length)return null===kn(h,c)?[c]:[];for(var d=0,p=0,g=[];p<c.length;){h.lastIndex=Rn?p:0;var b,v=kn(h,Rn?c:c.slice(p));if(null===v||(b=Bn(ht(h.lastIndex+(Rn?0:p)),c.length))===d)p=On(c,p,u);else{if(g.push(c.slice(d,p)),g.length===f)return g;for(var y=1;y<=v.length-1;y++)if(g.push(v[y]),g.length===f)return g;p=d=b}}return g.push(c.slice(d)),g}]}),!Rn);var Mn,jn,Tn,Fn,Ln;Nn(".board-box {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    overflow: hidden;\n}\n\n.board-box canvas {\n    position: absolute;\n    z-index: 0;\n    left: 0;\n    top: 0;\n    -webkit-transform: translate3d(0, 0, 0);\n    -moz-transform: translate3d(0, 0, 0);\n    -ms-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n    touch-action: none;\n}\n\n.board-add-page {\n    position: absolute;\n    right: 10px;\n    bottom: 10px;\n    display: flex;\n    width: 38px;\n    height: 38px;\n    border-radius: 50%;\n    font-size: 16px;\n    z-index: 999;\n    align-items: center;\n    justify-content: center;\n    background: rgba(33, 194, 33, 1);\n    color: #fff;\n    box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.44);\n    border: 0;\n    outline: none;\n}\n\n.board-add-page.disable {\n    background: #999;\n}\n\n#board-rubber-area {\n    -webkit-transform: translate3d(0, 0, 0);\n    -moz-transform: translate3d(0, 0, 0);\n    -ms-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n    position: absolute;\n    width: 0;\n    height: 0;\n    margin: 0;\n    padding: 0;\n    border: 1px dashed #eee;\n    background-color: #aaa;\n    z-index: 9999;\n    opacity: 0.6;\n    display: none;\n}"),Mn=document,jn=window,Tn=Mn.documentElement,Fn="orientationchange"in window?"orientationchange":"resize",Ln=function(){var t=Tn.clientWidth;t>=750&&(t=750),t&&(Tn.style.fontSize=t/750*100+"px")},Mn.addEventListener&&(jn.addEventListener(Fn,Ln,!1),Mn.addEventListener("DOMContentLoaded",Ln,!1));Nn('@font-face {font-family: "boardIcon";\n  src: url(\'iconfont.eot?t=1560761596947\'); /* IE9 */\n  src: url(\'iconfont.eot?t=1560761596947#iefix\') format(\'embedded-opentype\'), /* IE6-IE8 */\n  url(\'data:application/x-font-woff2;charset=utf-8;base64,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\') format(\'woff2\'),\n  url(\'iconfont.woff?t=1560761596947\') format(\'woff\'),\n  url(\'iconfont.ttf?t=1560761596947\') format(\'truetype\'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+ */\n  url(\'iconfont.svg?t=1560761596947#boardIcon\') format(\'svg\'); /* iOS 4.1- */\n}\n\n.boardIcon {\n  font-family: "boardIcon" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.board-icon-shipin:before {\n  content: "\\e600";\n}\n\n.board-icon-shanchu:before {\n  content: "\\e601";\n}\n\n.board-icon-tupian:before {\n  content: "\\e691";\n}\n\n.board-icon-yulanxuanzhuan:before {\n  content: "\\e626";\n}\n\n.board-icon-yinpin:before {\n  content: "\\e609";\n}\n\n.board-icon-jia:before {\n  content: "\\e608";\n}\n\n.board-icon-amplification_icon:before {\n  content: "\\e666";\n}\n\n.board-icon-ziyuanldpi:before {\n  content: "\\e619";\n}\n\n.board-icon-ziyuanldpi1:before {\n  content: "\\e61c";\n}\n\n.board-icon-ziyuanldpi2:before {\n  content: "\\e61d";\n}\n\n.board-icon-ziyuanldpi3:before {\n  content: "\\e61f";\n}\n\n'),t.board=null,function(){for(var t=["webkit","moz","ms","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(t){var e=(new Date).getTime(),n=Math.max(r+16,e);return setTimeout((function(){t(r=n)}),n-e)},window.cancelAnimationFrame=clearTimeout}}(),function(n,r){var i=function t(e){return new t.prototype.fn(e)};i.prototype.fn=function(t){t.zIndexInfo.sort((function(t,e){return e.zIndex-t.zIndex})),this.pointerSupport=!!window.PointerEvent,this.options=t,this.wrapDom=this.getWrapDom(t.el),this.initHeight=this.wrapDom.getBoundingClientRect().height,this.pageHeight=t.pageHeight||this.wrapDom.getBoundingClientRect().height,this.zIndexTotal=this.getAllZindex(t.zIndexInfo),this.canvasObj=[],this.initLayout()},i.prototype.fn.prototype={constructor:i.prototype.fn,getWrapDom:function(t){var n=null;if("string"==typeof t)switch(t[0]){case"#":n=r.getElementById(t.substr(1));break;case".":n=r.getElementsByClassName(t.substr(1))[0];break;default:n=r.getElementsByTagName(t)[0]}else"object"===e(t)&&(n=t);return n},getAllZindex:function(t){for(var e=t.length,n=0,r=t.length;n<r;n++)e+=t[n].other.img?t[n].other.img.length:0,e+=t[n].other.audio?t[n].other.audio.length:0,e+=t[n].other.video?t[n].other.video.length:0,e+=t[n].other.N2?t[n].other.N2.length:0;return e},resetScale:function(t,e,n){if(t.content.length)for(var r=this.wrapDom.getBoundingClientRect().height,i=0,o=t.content.length;i<o;i++){for(var a=0,c=t.content[i].path.length;a<c;a++)t.content[i].path[a].y=t.content[i].path[a].y*e/r;t.content[i].rectArea=this.getRectArea(t.content[i].path,n,this.wrapDom)}},getRectArea:function(t,e,n){var r=e/n.clientWidth,i=e/n.clientHeight,o={xMin:1/0,xMax:-1/0,yMin:1/0,yMax:-1/0},a=t.reduce((function(t,e){return t.xMin=Math.min.apply(null,[t.xMin,e.x]),t.xMax=Math.max.apply(null,[t.xMax,e.x]),t.yMin=Math.min.apply(null,[t.yMin,e.y]),t.yMax=Math.max.apply(null,[t.yMax,e.y]),t}),o);return[a.xMin-r<=0?0:a.xMin-r,a.xMax+r>=n.clientWidth?n.clientWidth:a.xMax+r,a.yMin-i<=0?0:a.yMin-i,a.yMax+i>=n.clientHeight?n.clientHeight:a.yMax+i]},initLayout:function(t){var e=this.wrapDom.getBoundingClientRect().height,n=Math.max.apply(Math,this.options.zIndexInfo.map((function(t){return t.page||1})));this.wrapDom.style.height=this.initHeight+(n-1)*this.pageHeight+"px",this.wrapDom.style.position="relative",this.clearWrapDom(this.wrapDom);for(var r=0,i=this.options.zIndexInfo.length;r<i;r++){var o=this.options.zIndexInfo[r];"isAddPage"===t&&this.resetScale(o,e,this.options.rubberRange),this.createCanvas(o)}!1!==this.options.addBtn&&this.initAddBtn()},initAddBtn:function(){var t=r.createElement("button"),e="";e=this.options.zIndexInfo[0].page===this.options.maxPage?"boardIcon board-icon-jia board-add-page disable":"boardIcon board-icon-jia board-add-page",t.setAttribute("class",e),this.wrapDom.appendChild(t);var n=this;t.onclick=function(t){t.preventDefault(),t.cancelBubble=!0,t.stopPropagation(),n.addPage()}},clearWrapDom:function(t){for(var e=0,n=t.children.length;e<n;e++){var r=t.children[e];(r.classList.contains("board-box")||r.classList.contains("board-add-page"))&&(t.removeChild(r),r=null,e--,n=t.children.length)}this.canvasObj=[]},createCanvas:function(t){var e=r.createElement("div");e.setAttribute("class","board-box board-box-"+t.zIndex),e.style.height=this.wrapDom.getBoundingClientRect().height+"px",e.style.zIndex=t.zIndex,this.wrapDom.appendChild(e);var n=r.createElement("canvas");n.setAttribute("id","board-"+t.zIndex),n.width=e.getBoundingClientRect().width,n.height=e.getBoundingClientRect().height,e.appendChild(n);var i=new o(n,t,this);this.canvasObj.push(i)},addPage:function(){this.options.zIndexInfo[0].page!==this.options.maxPage&&(this.options.zIndexInfo[0].page+=1,this.initLayout("isAddPage"),this.options.addCallBack&&"function"==typeof this.options.addCallBack&&this.options.addCallBack())},disableBoard:function(t){this.options.zIndexInfo[0].disabled=t,this.initLayout()}},t.board=i;var o=function(t,e,n){this.prevPressure=null,this.timeout=null,this.superClass=n,this.el=t,this.elWidth=t.width,this.elHeight=t.height,this.info=e,this.canvasSettings={strokeStyle:"",lineWidth:"",lineCap:"",inputType:""},this.rubberStartX=0,this.rubberStartY=0,this.rubberOn=!1,this.rubberRange=Number(n.options.rubberRange)||10,this.squareOfRubberRange=this.rubberRange*this.rubberRange,this.watcher=n.options.watcher,this.writeCallBack=n.options.writeCallBack,this.isDrawing=!1,this.beginPoint=null,this.coords={},this.curve=null,this.setUp(this.initSettings(e)),this.drawingContent(Object.assign({},this.canvasSettings)),e.disabled||this.initDrawEvent()};o.prototype={initSettings:function(t){return{strokeStyle:t.color||"#000000",lineWidth:t.size||2,lineCap:"round",inputType:t.inputType||"fountain-pen"}},setUp:function(t){for(var e in t)this.canvasSettings[e]=t[e];this.initCtx()},setPointSize:function(t,e){this.ctx.lineWidth=t*e},initCtx:function(){this.ctx=this.el.getContext("2d"),this.ctx.strokeStyle=this.canvasSettings.strokeStyle,this.ctx.lineWidth=this.canvasSettings.lineWidth,this.ctx.lineCap=this.canvasSettings.lineCap,this.ctx.globalCompositeOperation="fluorescent-pen"===this.canvasSettings.inputType?"darken":"source-over"},initDrawEvent:function(){var t=this;this.superClass.pointerSupport?(this.el.addEventListener("pointerdown",(function(e){t.touchStart.call(t,e,t.getInputCoords(e))}),!1),n.addEventListener("pointermove",(function(e){t.touchMove.call(t,e,t.getInputCoords(e))}),!1),n.addEventListener("pointerup",(function(e){t.touchEnd.call(t,e)}),!1)):(console.log("Pointer events are not supported!"),this.el.addEventListener("touchstart",(function(e){t.touchStart.call(t,e,t.getInputCoords(e))}),{passive:!1}),n.addEventListener("touchmove",(function(e){t.touchMove.call(t,e,t.getInputCoords(e))}),{passive:!1}),n.addEventListener("touchend",(function(e){t.touchEnd.call(t,e)}),{passive:!1}),this.el.addEventListener("mousedown",(function(e){t.touchStart.call(t,e,t.getInputCoords(e))})),n.addEventListener("mousemove",(function(e){t.touchMove.call(t,e,t.getInputCoords(e))})),n.addEventListener("mouseup",(function(e){t.touchEnd.call(t,e)}))),this.bindCbFunc(this.el,this),n.requestAnimationFrame&&requestAnimationFrame(this.drawing.bind(this))},bindCbFunc:function(t,e){this.superClass.pointerSupport?(e.watcher&&e.watcher.cb&&"function"==typeof e.watcher.cb&&t.addEventListener("pointerup",e.debounce(e.watcher.cb,e.watcher.wait)),e.writeCallBack&&e.writeCallBack.cb&&"function"==typeof e.writeCallBack.cb&&t.addEventListener("pointerdown",(function t(n){return e.writeCallBack.type&&"once"===e.writeCallBack.type&&n.target.removeEventListener("pointerdown",t),e.writeCallBack.cb()}))):(e.watcher&&e.watcher.cb&&"function"==typeof e.watcher.cb&&(t.addEventListener("touchend",e.debounce(e.watcher.cb,e.watcher.wait)),t.addEventListener("mouseup",e.debounce(e.watcher.cb,e.watcher.wait))),e.writeCallBack&&e.writeCallBack.cb&&"function"==typeof e.writeCallBack.cb&&(t.addEventListener("touchstart",(function t(n){return e.writeCallBack.type&&"once"===e.writeCallBack.type&&n.target.removeEventListener("touchstart",t),e.writeCallBack.cb()})),t.addEventListener("mousedown",(function t(n){return e.writeCallBack.type&&"once"===e.writeCallBack.type&&n.target.removeEventListener("mousedown",t),e.writeCallBack.cb()}))))},cbFunc:function(t){switch(t){case"async":this.watcher&&this.watcher.cb&&"function"==typeof this.watcher.cb&&this.debounce(this.watcher.cb,this.watcher.wait)();break;case"sync":this.writeCallBack&&this.writeCallBack.cb&&"function"==typeof this.writeCallBack.cb&&this.writeCallBack.cb();break;case"all":this.watcher&&this.watcher.cb&&"function"==typeof this.watcher.cb&&this.debounce(this.watcher.cb,this.watcher.wait)(),this.writeCallBack&&this.writeCallBack.cb&&"function"==typeof this.writeCallBack.cb&&this.writeCallBack.cb()}},debounce:function(t,e){var n=this;return function(){clearTimeout(n.timeout),n.timeout=setTimeout(t,e)}},clearEventBubble:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1},touchStart:function(t,e){t.touches&&t.touches.length>1?this.isDrawing=!1:("rubber"===this.canvasSettings.inputType?this.rubberStart(t,e):(this.coords=e,this.curve={path:[],canvasSettings:Object.assign({},this.canvasSettings),rectArea:[]},n.requestAnimationFrame||this.drawing(),this.clearEventBubble(t)),this.isDrawing=!0)},touchMove:function(t,e){t.touches&&t.touches.length>1?this.isDrawing=!1:this.isDrawing&&(this.coords=e,"rubber"===this.canvasSettings.inputType?this.rubberMove(t,e):(n.requestAnimationFrame||this.drawing(),this.clearEventBubble(t)))},touchEnd:function(t){if(!this.isDrawing||t.touches&&0!==t.touches.length||(this.isDrawing=!1,this.clearEventBubble(t)),"rubber"===this.canvasSettings.inputType)this.rubberUp(t);else{if(!this.curve)return;this.curve.rectArea=this.superClass.getRectArea(this.curve.path,this.rubberRange,this.el),this.info.content.push(this.curve),this.curve=null}},drawing:function(){if(this.isDrawing&&"rubber"!==this.canvasSettings.inputType&&this.curve)if(this.curve.path.push({x:this.coords.x/this.elWidth,y:this.coords.y/this.elHeight,pressure:this.coords.pressure}),this.curve.path.length>3){var t=this.curve.path.slice(-2),e={x:t[0].x*this.elWidth,y:t[0].y*this.elHeight},r={x:(t[0].x*this.elWidth+t[1].x*this.elWidth)/2,y:(t[0].y*this.elHeight+t[1].y*this.elHeight)/2};this.prevPressure&&this.prevPressure===this.coords.pressure||(this.prevPressure=this.coords.pressure,this.setPointSize(this.canvasSettings.lineWidth,this.coords.pressure)),this.ctx.beginPath(),this.ctx.moveTo(this.beginPoint.x,this.beginPoint.y),this.ctx.quadraticCurveTo(e.x,e.y,r.x,r.y),this.ctx.stroke(),this.ctx.closePath(),this.beginPoint=r}else this.beginPoint={x:this.curve.path[0].x*this.elWidth,y:this.curve.path[0].y*this.elHeight};n.requestAnimationFrame&&requestAnimationFrame(this.drawing.bind(this))},rubberStart:function(t,e){this.cbFunc("sync"),this.clearEventBubble(t),this.rubberOn=!0,this.rubberStartX=e.x,this.rubberStartY=e.y;var n=document.createElement("div");n.id="board-rubber-area",this.el.parentNode.appendChild(n),n.style.left=this.rubberStartX+"px",n.style.top=this.rubberStartY+"px"},rubberMove:function(t,e){if(this.rubberOn){this.clearEventBubble(t);var n=e.x,r=e.y,i=document.getElementById("board-rubber-area");i.style.display="block",i.style.left=Math.min(n,this.rubberStartX)+"px",i.style.top=Math.min(r,this.rubberStartY)+"px",i.style.width=Math.abs(n-this.rubberStartX)+"px",i.style.height=Math.abs(r-this.rubberStartY)+"px"}},rubberUp:function(t){if(this.rubberOn){this.cbFunc("async"),this.clearEventBubble(t);var e=document.getElementById("board-rubber-area"),n=e.offsetLeft,r=e.offsetTop,i=e.offsetWidth,o=e.offsetHeight;this.checkInnerWriting({x:n,y:r,width:i,height:o}),this.el.parentNode.removeChild(e),e=null,this.rubberOn=!1}},checkInnerWriting:function(t){if(this.info.content.length){for(var e=0,n=this.info.content.length;e<n;e++){var r=this.info.content[e];if(r){var i=Number((r.rectArea[0]*this.elWidth).toFixed(0)),o=Number((r.rectArea[1]*this.elWidth).toFixed(0)),a=Number((r.rectArea[2]*this.elHeight).toFixed(0)),c={x:i,y:a,width:o-i,height:Number((r.rectArea[3]*this.elHeight).toFixed(0))-a};this.isOverlap(t,c)&&this.shouldDelete(r,t)&&(this.info.content.splice(e,1),e-=1)}}this.drawingContent(Object.assign({},this.canvasSettings))}},isOverlap:function(t,e){var n=t.x,r=t.y,i=t.x+t.width,o=t.y+t.height,a=e.x,c=e.y,s=e.x+e.width,u=e.y+e.height;return!(n>s||a>i||r>u||c>o)},shouldDelete:function(t,e){for(var n=[e.x,e.x+e.width,e.y,e.y+e.height],r=t.path,i=0,o=r.length;i<o;i++){var a=r[i],c={x:a.x*this.elWidth,y:a.y*this.elHeight};if(this.isFitPath(c,n))return!0}return!1},isFitPath:function(t,e){return!(t.x<=e[0])&&(!(t.y>=e[3])&&(!(t.x>=e[1])&&!(t.y<=e[2])))},getInputCoords:function(t){t=t.originalEvent?t.originalEvent:t;var e,n,r=this.el.getBoundingClientRect(),i=this.el.width,o=this.el.height,a=r.left,c=r.top;return t.touches&&1==t.touches.length?(e=t.touches[0].pageX,n=t.touches[0].pageY):(e=t.pageX,n=t.pageY),e-=a,n-=c,{x:e*=i/r.width,y:n*=o/r.height,pressure:"pen"===t.pointerType?t.pressure:1}},drawingContent:function(t){if(this.clearAll(),this.info.content.length){for(var e=this.info.content,n=null,r=0,i=e.length;r<i;r++){var o=e[r];if(o&&o.path.length){var a=o.path;this.setUp(o.canvasSettings),this.beginPoint={x:a[0].x*this.elWidth,y:a[0].y*this.elHeight};for(var c=0,s=a.length;c<s&&!(c+2>a.length);c++)if(c>1){var u=a.slice(c,c+2),l={x:u[0].x*this.elWidth,y:u[0].y*this.elHeight},h={x:(u[0].x*this.elWidth+u[1].x*this.elWidth)/2,y:(u[0].y*this.elHeight+u[1].y*this.elHeight)/2};n&&n===a[c].pressure||(n=a[c].pressure,this.setPointSize(o.canvasSettings.lineWidth,a[c].pressure)),this.ctx.beginPath(),this.ctx.moveTo(this.beginPoint.x,this.beginPoint.y),this.ctx.quadraticCurveTo(l.x,l.y,h.x,h.y),this.ctx.stroke(),this.ctx.closePath(),this.beginPoint=h}}}this.setUp(t)}else this.setUp(t)},clearAll:function(){var t=this.el;t.width=t.width}}}("undefined"!=typeof window?window:global,document),Object.defineProperty(t,"__esModule",{value:!0})}));
